{% extends 'base.html' %}

{% load staticfiles %}

{% block header%}
	<h1 class="header-heading">Happy Birthday {{friend.user.get_full_name|default:friend.user.username}}</h1>
{%endblock%}
{%block sections%}
	<div class="section">
		<div class="container">
			<h2 class="heading section-heading">Posts - {{friend.user.get_full_name}}</h2>
			{% for post in posts %}
				<div class="col-xs-6 col-sm-4">
					<div class="thumbnail">
						<img src="/{{post.image.url}}"/>
						<div class="caption">
							{{post.caption}}
							<hr>
							Author - <a href="/posts/{{post.author.user.username}}">{{post.author.user.get_full_name}}</a>
							{% if post.comment_set %}
								
								<div >
									<ul class="comments">
									{% for comment in post.comment_set.all %}
										<li>
											<h6>{{comment.author.user.get_full_name}}</h6>
											<p>{{comment.comment}}</p>
										</li>
									{% endfor%}
									</ul>
								</div>
							{%endif%}
							{% if user.is_authenticated %}
								<form action="." method="post">
									{%csrf_token%}
									{% for field in comment_form.visible_fields %}
										<div class="form-group">
											{{field}}
										</div>
									{%endfor%}
									<input id="id_post" name="post" type="hidden" value="{{post.id}}">
									{% for field in comment_form.hidden_fields %}
										{{field.errors}}
									{%endfor%}
									<div class="form-group">
										<input class="btn btn-primary" name="comment_button" type="submit" value="comment"/>
									</div>
								</form>
							{%endif%}
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
	</div>
	{% if user.is_authenticated %}
	<div class="section">
		<div class="container">
		<h2 class="heading section-heading">Create New</h2>
			<form action="." method="post" enctype="multipart/form-data" class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2">
				{% csrf_token %}
				{% for field in post_form.visible_fields%}
					<div class="form-group">
						{{field}}
						{% if field.errors %}
							<ul class="errorlist">
								{% for error in field.errors%}
									<li><i class="fa fa-asterisk"></i> {{error}}</li>
								{% endfor%}
							</ul>
						{% endif%}
					</div>
				{%endfor%}
				{% for hidden in post_form.hidden_fields %}
					{{ hidden }}
					{{ hidden.errors }}
				{% endfor %}
				<div class="form-group center">
					<input name="post_button" type="submit" class="btn btn-primary " value="Create" />
				</div>
			</form>
		</div>
	</div>
	{% endif %}
{% endblock%}
